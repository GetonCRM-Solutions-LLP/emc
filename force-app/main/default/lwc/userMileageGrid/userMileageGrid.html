<template>
    <div class="animate__animated animate__slideInLeft animate__faster">
        <template lwc:if={modelList}>
            <c-user-preview-table view-name="Team" divider-class="row-divider--v2" d-flex="flex-block"
                head-th="header-title--v2" sort-th="sort-container p-top-v2" main-class={classToTable}
                scrollable={isScrollable} is-paginate={paginatedModal} model-data={modelList} columns={modalListColumn}
                options={modalKeyFields} is-sortable={sortable} inline-checkbox={isCheckbox} onrowselection={rowHandler}
                is-default-sort={isSort} colname="name" coltype="String" sortorder="desc" onapprovalprocess={showModal}
                onsearch={handleSearchEvent} onaccess={redirectModal} onpagecount={renderList}>
                <div slot="filter" class="slds-p-left_small slds-p-bottom_small row">
                    <template lwc:if={isSearchEnable}>                        
                        <button lwc:if={isRecord} onclick={downloadAllTrips}
                            class="slds-btn slds-btn-primary slds-btn-sm waves-effect bc-green waves-light mleft-0 btn-trip"><svg
                                xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"
                                fill="none" style="margin-right: 3px;">
                                <path
                                    d="m6.654 10.232 0.028 -0.028 -0.028 0.028 3.76 3.76a0.824 0.824 0 0 0 0.126 0.104 0.55 0.55 0 0 0 0.06 0.032h0.001l0.028 0.016 0.008 0.005 0.042 0.022a0.314 0.314 0 0 0 0.078 0.025l0.006 0.002a0.49 0.49 0 0 0 0.072 0.022l0.002 0.001a0.828 0.828 0 0 0 0.324 0h0.002a0.442 0.442 0 0 0 0.046 -0.016 0.459 0.459 0 0 1 0.024 -0.006l0.002 -0.002 0.028 -0.008 0.05 -0.016a0.464 0.464 0 0 0 0.086 -0.044l0.001 -0.001 0.002 -0.001a0.204 0.204 0 0 1 0.024 -0.014l0.032 -0.019a0.838 0.838 0 0 0 0.126 -0.104l3.76 -3.76a0.828 0.828 0 0 0 0 -1.172 0.828 0.828 0 0 0 -1.172 0l-2.348 2.348V4.262a0.83 0.83 0 0 0 -1.656 0v7.147l-2.343 -2.348a0.828 0.828 0 0 0 -1.171 0 0.828 0.828 0 0 0 0 1.172Zm11.724 6.792a0.829 0.829 0 0 0 -0.83 -0.828H4.45a0.83 0.83 0 0 0 0 1.655h13.1a0.83 0.83 0 0 0 0.829 -0.829Z"
                                    fill="white" stroke="white" stroke-width="0.08871573333333335" />
                            </svg>Download
                            <!-- <i class="fa-solid fa-download"></i>Download -->
                        </button>
                        <button lwc:if={isRecord}
                            class="slds-btn slds-btn-primary slds-btn-sm slds-m-left_small slds-m-right_small waves-effect bc-outline--background waves-light mleft-0 btn-outline-green sync-mileage-btn"
                            onclick={syncAllTrips}><svg width="25px" height="25px" viewBox="0 0 9.375 9.375" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <g id="SVGRepo_bgCarrier" stroke-width="0" />
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" />
                                <g id="SVGRepo_iconCarrier">
                                    <path
                                        d="M7.199 1.66a0.297 0.297 0 0 0 -0.293 0.293v0.949l-0.328 -0.328a2.828 2.828 0 0 0 -4.688 1.086 0.289 0.289 0 0 0 0.18 0.391 0.285 0.285 0 0 0 0.098 0 0.297 0.297 0 0 0 0.277 -0.199 2.199 2.199 0 0 1 0.535 -0.859 2.25 2.25 0 0 1 3.176 0l0.328 0.328h-0.941a0.293 0.293 0 1 0 0 0.586h1.656a0.289 0.289 0 0 0 0.293 -0.293V1.953a0.293 0.293 0 0 0 -0.293 -0.293Z"
                                        fill="#7abb4a" />
                                    <path
                                        d="M7.297 5.344a0.297 0.297 0 0 0 -0.391 0.184 2.199 2.199 0 0 1 -0.535 0.859 2.25 2.25 0 0 1 -3.176 0l-0.328 -0.328h0.965a0.293 0.293 0 1 0 0 -0.586H2.176a0.289 0.289 0 0 0 -0.293 0.293V7.422a0.293 0.293 0 1 0 0.586 0v-0.949l0.328 0.328a2.828 2.828 0 0 0 4.688 -1.086 0.289 0.289 0 0 0 -0.188 -0.371Z"
                                        fill="#7abb4a" />
                                </g>
                            </svg> 
                            Sync All
                        </button>
                        <div class="slds-size_2-of-7 slds-m-left_x-small">
                            <c-dropdown-select data-id="typeSelect" options={typeList} value={value} title="Type"
                                onchange={handleTypeChange}
                                main-class="default-box-input slds-truncate"></c-dropdown-select>
                        </div>
                        <template lwc:if={showTeam}>
                            <div class="slds-size_2-of-7 slds-m-left_x-small">
                                <c-dropdown-select data-id="teamSelect" options={teamList} value={value} title="My Team"
                                    onchange={handleTeamChange}
                                    main-class="default-box-input slds-truncate"></c-dropdown-select>
                            </div>
                        </template>
                    </template>
                </div>
                <div slot="header">
                    <div class="slds-float_right">
                        <div class="slds-input-has-icon slds-input-has-icon_right search-holder">
                            <div class="search-icon-block">
                                <img class="search-icon" src={searchIcon} />
                            </div>
                            <input class="slds-input filter-input" type="text" placeholder="Search"
                                onkeyup={handleChange} />
                        </div>
                    </div>
                </div>
                <div class="slds-cell-fixed checkbox-slot-div-select" slot="checkbox">
                    <template lwc:if={isSubmitVisible}>
                        <div class="corner-loop"><button
                                class="slds-btn slds-button_outline-brand waves-effect waves-light btn-outline bc-outline--background mleft-0"
                                onclick={submitHandler}><i class="fa-solid fa-plus fa-icon"></i>Submit</button></div>
                    </template>
                    <div class="slds-size_6-of-12 corner-select">
                        <c-dropdown-select options={selectList} title="Approve" value={value}
                            onchange={handlePageChange}
                            main-class="default-box-input slds-truncate"></c-dropdown-select>
                    </div>
                </div>
            </c-user-preview-table>
        </template>
    </div>
    <c-user-profile-modal header={headerModalText} month='' show-footer={isFalse} show-btn={isFalse}
        modal-class={modalClass} header-class={headerClass} subheader-class={subheaderClass}
        modal-content-style={modalContent} style-header={styleHeader} close-btn-class={styleClosebtn} onclosedialog={closeModal}>
        <template lwc:if={islockdate}>
            <div>
                <div class="slds-align_absolute-center slds-p-bottom_x-large message-center">
                    {contentMessage}</div>
                <div class="slds-align_absolute-center slds-p-right_medium slds-p-left_medium slds-p-bottom_x-large">
                    <button
                        class="slds-btn slds-btn-primary slds-btn-sm waves-effect bc-green waves-light mleft-0 btn-submit" onclick={handleApproval}>
                        Submit</button>
                    <button
                        class="slds-btn slds-btn-primary slds-btn-sm slds-m-left_medium waves-effect bc-black waves-light mleft-0 btn-submit" onclick={cancelApproval}>
                        Cancel</button>
                </div>
            </div>
        </template>
        <template lwc:else>
            <div>
                <div
                    class="slds-align_absolute-center slds-p-right_medium slds-p-left_medium slds-p-bottom_x-large message">
                    {contentMessage}</div>
            </div>
        </template>
    </c-user-profile-modal>
    <c-export-excel></c-export-excel>
</template>
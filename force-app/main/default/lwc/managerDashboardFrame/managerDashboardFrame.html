<template>
    <c-navigation-menu driver-menu-item={managerProfileMenu} onsidebar={handleSidebarToggle} driver-name={userName} driver-email={userEmail} onlogout={handleLogout}></c-navigation-menu><!-- onopen={takeMeToMenu} -->
	<c-dashboard-profile-header user-name={firstName} full-name={contactTitle} unread={unreadCount} page-source={isHomePage} onnotify={viewAllNotification} onlogout={handleLogout} driver-menu={menu} is-navigate="true"></c-dashboard-profile-header>
    <section class={section} id="default">
        <template lwc:if={isProfile}>
            <c-manager-user-profile contact-id={_contactId} account-id={_accountId} onmileage={getMileageList} onteam={getMyTeamList} onaccess={getUnapproveMileage} onhighrisk={redirectToHighRiskMileage} onhighriskaccess={redirectToRiskMileage} onhighaccess={redirectMileage} onhighmileage={redirectToHighMileage} notify-message-list={notificationList} notify-message={notifyList} is-notify={isNotify} onclose={handleNotification} onmodal={viewAllNotification}></c-manager-user-profile>
        </template>
        <template lwc:elseif={mileageApproval}>
            <template lwc:if={listOfDriver}>
                <c-user-mileage-grid contact-id={_contactId} account-id={_accountId} contact-list={listOfDriver} onpreview={getUnapproveMileage} onshow={showSpinner} onhide={hideSpinner} ontoast={showToast} show-team={showTeam} filter={nameFilter} contact-info={userName}></c-user-mileage-grid>
            </template>
        </template>
        <template lwc:elseif={teamList}>
            <template lwc:if={myTeamList}>
               <c-user-view-mileage contact-id={_contactId} account-id={_accountId} contact-list={myTeamList} show-team={showTeam} contact-info={userName} filter={contactTitle} trip-column={teamColumn} trip-key-fields={teamKeyFields} onpreview={redirectToDriverView}></c-user-view-mileage><!--onpreview={redirectToDriverView}-->
            </template>
        </template>
        <template lwc:elseif={mileageSummary}>
            <template lwc:if={listOfReimbursement}>
               <c-user-view-mileage contact-id={_contactId} account-id={_accountId} contact-list={listOfReimbursement} contact-info={userName} filter={contactTitle} show-team={showTeam} account-year={mileageAccountList} month-year={lastMonthSelected} trip-column={summaryColumn} trip-key-fields={summaryKeyFields} onpreview={getMileage} onmonthyearchange={handleMonthYearRender}></c-user-view-mileage>
            </template>
        </template>
        <template lwc:elseif={mileageSummaryView}>
            <template lwc:if={viewMileages}>
               <c-view-detail-user contact-id={_contactId} account-id={_accountId} contact-list={viewMileages} user-name={mileageContactName} trip-column={summaryDetailColumn} trip-key-fields={summaryDetailKeyFields} month={mileageMonthList} selected-month={monthSelected} onback={redirectToSummary} onmonthchange={refreshDetailSummary}></c-view-detail-user>
            </template>
        </template>
        <template lwc:elseif={mileageView}>
			<template lwc:if={mileageRecord}>
				<c-new-datatable-component main-class="slds-table--header-fixed_container preview-height" driver-data={mileageRecord} month-list={mileageAccountList} driver-list={driverdetail} status-list={Statusoptions} ontoastmessage={handleToastMessage} norecord-message="There is no trip data available" onshowloader={showSpinner} onhideloader={hideSpinner}></c-new-datatable-component> 
			</template>
        </template>
		<template lwc:elseif={showDriverView}>
			<c-manager-driver-profile account-id={_accountId} contact-id={idContact} ontoast={showToast} onback={redirectToMyTeam}></c-manager-driver-profile>
        </template>
        <template lwc:else>
            <template lwc:if={unapproveMileages}>
                 <c-user-flagging-trip contact-id={_contactId} account-id={_accountId}  header-name={driverName} contact-list={unapproveMileages} onback={redirectToMileage} onshow={showSpinner} onhide={hideSpinner} ontoast={showToast} onflagcomplete={handleComplete} onsyncdone={handleSyncDone}></c-user-flagging-trip>
            </template>
        </template>
        <c-user-profile-modal header={headerModalText} month='' show-footer={isFalse} show-btn={isFalse}
			modal-class={modalClass}
			header-class={headerClass}
			subheader-class={subheaderClass}
			modal-content-style={modalContent}
			style-header={styleHeader}
			close-btn-class={styleClosebtn}>
				<template lwc:if={notificationModal}>
					<div class="slds-p-left_x-large slds-p-right_x-large slds-scrollable_y">
						<template if:true={isNotify}> 
							<template for:each={notifyList} for:item="notify" for:index="index">
								<div data-id={notify.id} key={notify.id}
									class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_12-of-12  slds-m-vertical_medium slds-m-horizontal_x-small slds-p-around_small"
									style="
									width: 100%;
									height: auto;
									border-radius: 13px;
									background: #404B5A;
									display: flex;
									flex-direction: row;">
									<div class="slds-p-top_xx-small
											slds-p-left_xx-small slds-p-right_x-small">
										<div><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 30 30" fill="none">
											<circle cx="15" cy="15" r="12.2828" stroke="#FA7800" stroke-width="1.43448"/>
											<path d="M16.5016 16.6054C16.4736 17.2346 15.9554 17.7302 15.3257 17.7302V17.7302C14.697 17.7302 14.1793 17.2361 14.15 16.608L13.8506 10.1943C13.8125 9.37672 14.4651 8.69297 15.2836 8.69297H15.3536C16.1708 8.69297 16.8229 9.37471 16.7867 10.1911L16.5016 16.6054ZM16.4717 21.807C16.1504 22.1283 15.7688 22.289 15.327 22.289C14.8851 22.289 14.5036 22.1283 14.1822 21.807C13.8743 21.4857 13.7203 21.1108 13.7203 20.6824C13.7203 20.2406 13.8743 19.859 14.1822 19.5377C14.5036 19.2163 14.8851 19.0557 15.327 19.0557C15.7688 19.0557 16.1504 19.2163 16.4717 19.5377C16.793 19.859 16.9537 20.2406 16.9537 20.6824C16.9537 21.1108 16.793 21.4857 16.4717 21.807Z" fill="#FA7800"/>
											</svg></div>
									</div>
									<div class="slds-p-right_small slds-p-top_xx-small" style="font-family: Proxima Nova;font-size: 14px;font-weight: 500;
										width: 100%;
										line-height: 17px;
										letter-spacing: 0em;
										color: #FFFFFF;
										text-align: left;
										">{notify.notificationMessage}
										<div style="font-weight: 700;
										font-size: 12px;
										line-height: 12px;
										color: #7ABB4A;
										" class="slds-p-top_x-small"><lightning-formatted-date-time
										value={notify.modifiedDate}
										year="numeric"
										day="2-digit"
										month="long"
										hour="2-digit"
										minute="2-digit"
										time-zone="America/Panama"
									>
									</lightning-formatted-date-time></div>
									</div>
									<div class="white-cross slds-align_absolute-center">
										<i data-id={notify.id} class="fa-solid fa-lg fa-xmark" onclick={handleClose}></i>
									</div>
								</div>
							</template>
						 </template> 
					
						<template if:false={isNotify}>
							<div class="slds-align_absolute-center slds-p-top_medium slds-p-bottom_x-large no-data-message">You have no notifications right now.</div>
						</template>
					</div>
				</template>
				<template  lwc:else>
					<div class="slds-p-around_large" style="display: flex;flex-flow: column;">
						<div class="slds-align_absolute-center"><i class="fa-solid fa-3x fa-check"></i></div>
						<div class="slds-align_absolute-center slds-p-around_medium message">{contentMessage}</div>
						<div class="slds-align_absolute-center sub-message">{subMessage}</div>
					</div>
				</template>
		</c-user-profile-modal>
       
        <!-- acc-id={_accountId} admin-id={_contactId} -->
    </section>
</template>
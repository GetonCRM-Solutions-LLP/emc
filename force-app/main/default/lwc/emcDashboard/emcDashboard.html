<template>
    <template if:true={isSpinner}>
        <c-espinner></c-espinner>
    </template>
    <c-emc-navbar>
        <li class="nav-item active">
            <a class="nav-link text-white" title="Home">
                Dashboard
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link text-white" title="Menu Item">
                Mileage
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link text-white" title="Menu Item">
                Communications
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link text-white" title="Menu Item">
                My Details
            </a>
        </li>

        <li class="nav-item">
            <a href="/app/secur/logout.jsp" class="nav-link text-white" title="Menu Item">
                Logout
            </a>
        </li>
    </c-emc-navbar>
    <section class="container-fluid">
        <div class="report-link">
            <button class="btn button_secondary float-right" onclick={handleShowFirstModal}>Login As</button>
            <button class="btn button_secondary float-right" onclick={handleShowSecondModal}>View Chart</button>
            <h3 class="mb-30 d-block">Team Reimbursement Summary</h3>
        </div>
        <c-xlsx-mockup header-list={xlsHeader} filename={fileNameformanager} worksheet-name-list={workSheetNameList}
            sheet-data={xlsData}></c-xlsx-mockup>
        <c-emc-modal header="Manager List" modal-id="1" show-footer={isTrue} show-btn={isTrue}
            header-class="slds-modal__header slds-p-bottom_xx-small"
            subheader-class="slds-text-heading_medium slds-hyphenate header-string"
            sd-header="slds-modal__container modal-width" onexceldownload={download}>
            <div slot="header">
                <c-e-search-input onlookup={handleKeyChange} css-class="slds-float_right"></c-e-search-input>
            </div>
            <template if:true={lengthofmanager}>
                <div>
                    <template if:true={showTable}>
                        <c-dashboard-table headers={tableHeaders} body={recordsToDisplay} is-record={showData}  no-data="No Manager Available"
                            key-name={keyFields} is-checkbox={checkboxType}>
                        </c-dashboard-table>
                    </template>
                </div>
                <div slot="footer">
                    <c-c-paginator records={tableList} total-records={tableList.length} options={keyFields}
                        onpaginatorchange={handlePaginatorChange}>
                    </c-c-paginator>
                </div>
            </template>
            <template if:false={lengthofmanager}>
                <div>
                    <template if:true={showTable}>
                        <c-dashboard-table headers={tableHeaders} body={tableList} is-record={showRecord} no-data="No Manager Available"
                            key-name={keyFields} is-checkbox={checkboxType}>
                        </c-dashboard-table>
                    </template>
                </div>
            </template>
        </c-emc-modal>

        <c-emc-modal header="Team Reimbursement Monthly Mileage" modal-id="2" show-footer={isFalse} show-btn={isFalse}
            header-class="slds-modal__header slds-p-bottom_xx-small"
            subheader-class="slds-text-heading_medium slds-hyphenate header-string"
            sd-header="slds-modal__container modal-width">
            <div>
                <template if:true={chartVisible}>
                    <c-view-chart chart-data={chartContent}></c-view-chart>
                </template>
            </div>
            <div slot="footer">
                <lightning-button label="Save" variant="success" onclick={handleCloseModal}></lightning-button>
                <lightning-button label="Delete" variant="destructive" onclick={handleCloseModal}></lightning-button>
            </div>
        </c-emc-modal>

        <c-emc-modal header="Updating Reimbursements" modal-id="3" show-footer={isFalse} show-btn={isFalse}
            header-class="slds-modal__header slds-p-bottom_xx-small bg-green"
            subheader-class="slds-text-heading_medium slds-hyphenate header-string-modal"
            sd-header="slds-modal__container m-width" onclosedialog={cancelProcess}>
            <div>
                <div class="check-in-info process-msg">
                    <p>Mileage approvals are processing</p>
                </div>
            </div>
        </c-emc-modal>

        <c-emc-modal header="Updating Reimbursements" modal-id="5" show-footer={isFalse} show-btn={isFalse}
            header-class="slds-modal__header slds-p-bottom_xx-small bg-green"
            subheader-class="slds-text-heading_medium slds-hyphenate header-string-modal"
            sd-header="slds-modal__container m-width">
            <div>
                <div class="check-in-info process-msg">
                    <p>Mileage approvals are processing</p>
                </div>
            </div>
        </c-emc-modal>

        <div class="my-3 admin-roster-tab-section">
            <c-c-team-dashboard onopenmodalforunapprovedata={modalForUnapprove}
                onopenmodalforapproval={modalForApproval} onalertprocessing={alertModalForProcessing}
                onapprovalmessage={messageForApproval} ></c-c-team-dashboard>
        </div>


        <!--<c-editable-data-table my-list={recordsToDisplay}></c-editable-data-table>-->

        <!-- <div class="slds-tableheader-fixed_container" style="height:450px;">
                <div class="slds-scrollable_y" style="height:100%;">
                    <table class="slds-table slds-table_bordered slds-tableheader-fixed slds-table_striped">
                        <thead>
                            <tr class="slds-text-title_caps">
                                <th scope="col">
                                    <div class="slds-truncate slds-cell-fixed" title="Name">Name</div>
                                </th>
                                <th scope="col">
                                    <div class="slds-truncate slds-cell-fixed" title="Origin">Origin</div>
                                </th>
                                <th scope="col">
                                    <div class="slds-truncate slds-cell-fixed" title="Destination">Destination</div>
                                </th>
                                <th scope="col">
                                    <div class="slds-truncate slds-cell-fixed" title="Trip Date">Trip Date</div>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <template for:each={recordsToDisplay} for:item="m">
                                <tr key={m.Id}>
                                    <td data-label="Name">
                                        <div class="slds-truncate">{m.Name}</div>
                                    </td>
                                    <td data-label="Origin">
                                        <div class="slds-truncate">{m.Trip_Origin__c}</div>
                                    </td>
                                    <td data-label="Destination">
                                        <div class="slds-truncate">{m.Trip_Destination__c}</div>
                                    </td>
                                    <td data-label="Trip Date">
                                        <div class="slds-truncate">{m.Trip_Date__c}</div>
                                    </td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
    
    
                </div>
            </div> -->


        <!-- <lightning-datatable key-field="Id" 
                                data={recordsToDisplay} 
                                columns={columns}
                                hide-checkbox-column
                                show-row-number-column
                                row-number-offset={rowNumberOffset}>
            </lightning-datatable> -->
        <div>
            <template if:true={isModalOpen}>
                <template if:true={modelData}>
                    <c-model-data-table onclosedialog={closeModal} onshowtoast={toastEvent} tripdata={modelData}
                        theaddata={modelColumns} options={modelKeyFields} model-head-name={modelName}
                        onmileageapproval={mileageApproval}></c-model-data-table>
                    <template if:true={isSpinnerForModal}>
                        <c-espinner></c-espinner>
                    </template>
                    <c-emc-modal header={headerTop} modal-id="4" show-footer={isFalse} show-btn={isFalse}
                        header-class="slds-modal__header slds-p-bottom_xx-small bg-green"
                        subheader-class="slds-text-heading_medium slds-hyphenate header-string-modal"
                        sd-header="slds-modal__container m-width" onclosedialog={okforapprove}>
                        <div>
                            <div class="check-in-info process-msg">
                                <p>{middleTop}</p>
                            </div>
                            <div class="check-submit"><button type="button" onclick={okforapprove}
                                    class="btn slds-button_success" data-dismiss="modal">OK</button></div>
                        </div>
                    </c-emc-modal>
                </template>
            </template>
        </div>
    </section>

</template>
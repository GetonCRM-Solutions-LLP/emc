<template>
    <template if:true={promiseError}>
        <c-m-burse-error message={errorMessage}></c-m-burse-error>
    </template>
    <div class="transition" if:true={packetAlreadySent}>
        <div>
            <div class="slds-text-heading_medium slds-text-align_center slds-p-bottom_medium font-bold">Step 3 - Your
                Driver Packet Was Sent On <lightning-formatted-date-time value={packetHeaderText} year="numeric"
                    month="numeric" day="numeric">
                </lightning-formatted-date-time>,</div>
        </div>
        <div class="slds-text-heading_small slds-text-align_center font-style emcFont">Don't forget to <strong>sign by <lightning-formatted-date-time value={packetSignDate} year="numeric" month="numeric" day="numeric"></lightning-formatted-date-time> or you risk forfeiting<br/>your car allowance until you have signed</strong>
        </div>
        <div class="m-left m-right">
            <div class="box__img">
                <img class="packet__img" src={packetCss} />
            </div>
        </div>
        <div class="slds-clearfix slds-align_absolute-center m-left m-right">
            <div class="footer-button mright-0 mleft-0">
                <button if:false={isPacket}
                    class="slds-btn slds-btn-primary slds-btn-sm waves-effect bc-blue waves-light"
                    onclick={sendDriverPacket}>
                    Resend Driver Packet
                </button>
                <div class="slds-align_absolute-center">
                    <div class="back_to_previous back-position slds-float_left" if:true={isShowUpload}>
                        <a class="font-s" onclick={backToPage}><i class="fa-solid fa-angle-left"></i> Back</a>
                    </div>
                    <div class="back_to_previous  back-position slds-float_right" if:false={isShow}>
                        <a class="font-s" onclick={skipToPage}>Skip<i class="fa-solid fa-angle-right"></i></a>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <div class="transition" if:true={packetIntial}>
        <div>
            <c-m-burse-header-text head-text="Step 3 - Request and Sign Driver Packet"></c-m-burse-header-text>
        </div>
        <div class="slds-text-heading_small slds-text-align_center font-style emcFont">Select <strong>Send to Review
                &amp; Sign</strong></div>
        <div class="m-left m-right">
            <div class="box__img">
                <img class="packet__img" src={packetCss} />
            </div>
        </div>
        <div class="slds-clearfix  m-left m-right">
            <div class="footer-text slds-float_left">
                <div class="font-style"><strong>Make sure you sign your driver packet pages within 30 days.
                        You:</strong>
                    <ul class="slds-list_dotted slds-p-top_x-small font-style">
                        <li>Do not have to sign now</li>
                        <li>Can review the packet and sign it later</li>
                        <li>Could forfeit your car allowance until you sign</li>
                    </ul>
                </div>
            </div>
            <div class="footer-button slds-float_right mright-0 mleft-0">
                <button if:false={isPacket}
                    class="slds-btn slds-btn-primary slds-btn-sm waves-effect bc-blue waves-light"
                    onclick={sendDriverPacket}>
                    Send Driver Packet
                </button>
                <div>
                    <div class="back_to_previous back-position slds-float_left" if:true={isShowUpload}>
                        <a class="font-s" onclick={backToPage}><i class="fa-solid fa-angle-left"></i> Back</a>
                    </div>
                    <div class="back_to_previous  back-position slds-float_right" if:false={isShow}>
                        <a class="font-s" onclick={skipToPage}>Skip<i class="fa-solid fa-angle-right"></i></a>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <div class="transition" if:true={packetSent}>
        <div>
            <c-m-burse-header-text head-text="Step 3 - Driver Packet Sent"></c-m-burse-header-text>
        </div>
        <div class="slds-text-heading_small slds-text-align_center font-style emcFont">Check <strong>your email, the
                packet was sent to {emailOfDriver}.</strong><br />
            If the packet is not in your inbox, please check your spam folder
        </div>
        <div class="m-left m-right">
            <div class="box__img">
                <img class="sent__packet__img" src={packetCss} />
            </div>
        </div>
        <div class=""> <!--m-top m-right-->
            <div class="footer-button slds-align_absolute-center" style="flex-flow: column">
                <template if:true={isAppDone}>
                    <button class="slds-btn slds-btn-primary slds-btn-sm waves-effect bc-blue waves-light"
                        onclick={goToDashboard} if:false={afterRegister}>
                        {renderBtnText}
                    </button>
                    <template if:true={allowRedirect}>
                        <button class="slds-btn slds-btn-primary slds-btn-sm waves-effect bc-blue waves-light"
                        onclick={redirectToDashboard} if:true={afterRegister}>
                            Go To My Account
                        </button>
                        <button class="slds-btn slds-btn-primary slds-btn-sm waves-effect bc-blue waves-light"
                        onclick={redirectToDashboard} if:true={showWatchBtn}>
                            Take me to the dashboard
                        </button>
                    </template>
                </template>
                <template if:false={isAppDone}>
                    <button class="slds-btn slds-btn-primary slds-btn-sm waves-effect bc-blue waves-light"
                        onclick={nextmLogPreview}>
                        {renderText}
                    </button>
                </template>
                <div class="back_to_previous slds-float_left" if:true={isShowUpload}>
                    <a class="font-s" onclick={backToPacket}><i class="fa-solid fa-angle-left"></i> Back</a>
                </div>
            </div>
        </div>
    </div>
</template>
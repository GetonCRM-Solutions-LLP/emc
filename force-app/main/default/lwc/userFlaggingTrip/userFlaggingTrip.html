<template>
    <div class="animate__animated animate__slideInLeft animate__faster">
        <div class="row">
            <div class="container">
                <template lwc:if={modelList}>
                    <c-user-preview-table header-download="true" show-footer="true" flag-preview="true"
                        trip-month={headerName} sync-visible="true" button-label="Sync" divider-class="row-divider--v2"
                        head-th="header-title--v2" sort-th="sort-container p-top-v2" d-flex="flex-block"
                        main-class={classToTable} onrowselection={rowHandler} onsearch={handleSearchEvent}
                        scrollable={isScrollable} is-paginate={paginatedModal} model-data={modelList}
                        columns={modalListColumn} options={modalKeyFields} is-sortable={sortable}
                        inline-checkbox={isCheckbox} onpagecount={renderList} is-default-sort={isSort}
                        colname="tripdate" coltype="Date" sortorder="desc">
                        <template lwc:if={isRecord}>
                            <div slot="filter" class="slds-p-left_small slds-p-top_xx-small row">
                                <button
                                    class="slds-btn slds-btn-primary slds-btn-sm waves-effect bc-green waves-light mleft-0 btn-trip slds-float_right"
                                    onclick={downloadAllTrips}><svg
                                    xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"
                                    fill="none" style="margin-right: 3px;">
                                    <path
                                        d="m6.654 10.232 0.028 -0.028 -0.028 0.028 3.76 3.76a0.824 0.824 0 0 0 0.126 0.104 0.55 0.55 0 0 0 0.06 0.032h0.001l0.028 0.016 0.008 0.005 0.042 0.022a0.314 0.314 0 0 0 0.078 0.025l0.006 0.002a0.49 0.49 0 0 0 0.072 0.022l0.002 0.001a0.828 0.828 0 0 0 0.324 0h0.002a0.442 0.442 0 0 0 0.046 -0.016 0.459 0.459 0 0 1 0.024 -0.006l0.002 -0.002 0.028 -0.008 0.05 -0.016a0.464 0.464 0 0 0 0.086 -0.044l0.001 -0.001 0.002 -0.001a0.204 0.204 0 0 1 0.024 -0.014l0.032 -0.019a0.838 0.838 0 0 0 0.126 -0.104l3.76 -3.76a0.828 0.828 0 0 0 0 -1.172 0.828 0.828 0 0 0 -1.172 0l-2.348 2.348V4.262a0.83 0.83 0 0 0 -1.656 0v7.147l-2.343 -2.348a0.828 0.828 0 0 0 -1.171 0 0.828 0.828 0 0 0 0 1.172Zm11.724 6.792a0.829 0.829 0 0 0 -0.83 -0.828H4.45a0.83 0.83 0 0 0 0 1.655h13.1a0.83 0.83 0 0 0 0.829 -0.829Z"
                                        fill="white" stroke="white" stroke-width="0.08871573333333335" /></svg>Download</button>
                                <button
                                    class="slds-btn slds-btn-primary slds-btn-sm slds-m-left_small slds-m-right_small waves-effect bc-outline--background waves-light mleft-0 btn-outline-green sync-mileage-btn"
                                    onclick={syncMileage}>
                                    <!--<svg width="25px" height="25px" viewBox="0 0 9.375 9.375" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"/><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"/><g id="SVGRepo_iconCarrier"><path d="M7.199 1.66a0.297 0.297 0 0 0 -0.293 0.293v0.949l-0.328 -0.328a2.828 2.828 0 0 0 -4.688 1.086 0.289 0.289 0 0 0 0.18 0.391 0.285 0.285 0 0 0 0.098 0 0.297 0.297 0 0 0 0.277 -0.199 2.199 2.199 0 0 1 0.535 -0.859 2.25 2.25 0 0 1 3.176 0l0.328 0.328h-0.941a0.293 0.293 0 1 0 0 0.586h1.656a0.289 0.289 0 0 0 0.293 -0.293V1.953a0.293 0.293 0 0 0 -0.293 -0.293Z" fill="#7abb4a"/><path d="M7.297 5.344a0.297 0.297 0 0 0 -0.391 0.184 2.199 2.199 0 0 1 -0.535 0.859 2.25 2.25 0 0 1 -3.176 0l-0.328 -0.328h0.965a0.293 0.293 0 1 0 0 -0.586H2.176a0.289 0.289 0 0 0 -0.293 0.293V7.422a0.293 0.293 0 1 0 0.586 0v-0.949l0.328 0.328a2.828 2.828 0 0 0 4.688 -1.086 0.289 0.289 0 0 0 -0.188 -0.371Z" fill="#7abb4a"/></g></svg>--><svg
                                        xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25"
                                        style="enable-background:new 0 0 30 30" xml:space="preserve" width="25"
                                        height="25">
                                        <path
                                            d="m17.083 7.75 -0.25 -0.25c-0.583 -0.5 -1.333 -0.917 -2.083 -1.167 -0.5 -0.167 -1 -0.25 -1.5 -0.25h-1c-0.583 0.083 -1.167 0.25 -1.667 0.5 -1.417 0.667 -2.417 1.667 -3 3 -0.333 0.583 -0.5 1.25 -0.583 1.917 0 0.25 0 0.5 -0.083 0.75 0 0.333 -0.333 0.583 -0.583 0.667 -0.333 0.083 -0.667 0 -0.833 -0.333 -0.083 -0.167 -0.167 -0.333 -0.167 -0.5 0 -1.167 0.25 -2.167 0.75 -3.25 0.75 -1.5 1.833 -2.667 3.333 -3.5 0.75 -0.417 1.583 -0.667 2.5 -0.833 0.583 -0.083 1.167 -0.083 1.75 -0.083 1.583 0.167 3 0.75 4.25 1.833l0.083 0.083V5.167c0 -0.167 0 -0.333 0.083 -0.417 0.167 -0.25 0.583 -0.417 0.917 -0.333 0.333 0.083 0.5 0.333 0.5 0.667v3.5c-0.083 0.333 -0.333 0.583 -0.667 0.583h-3.25c-0.333 0 -0.583 -0.083 -0.75 -0.417 -0.25 -0.417 -0.083 -0.917 0.333 -1.167 0.083 -0.083 0.167 -0.083 0.333 -0.083 0.583 0.333 1.083 0.333 1.583 0.25 0 0.083 0 0.083 0 0zM7 18.5s0 0.083 0 0v1.167c0 0.083 0 0.25 -0.083 0.333 -0.083 0.333 -0.583 0.583 -1 0.417 -0.333 -0.167 -0.417 -0.333 -0.5 -0.667v-3.5c0.083 -0.333 0.333 -0.583 0.667 -0.583h3.25c0.25 0 0.5 0.083 0.667 0.25 0.25 0.25 0.333 0.917 -0.167 1.167 -0.167 0.083 -0.25 0.167 -0.417 0.167H7.917l0.083 0.083c0.333 0.333 0.667 0.583 1 0.75 0.583 0.333 1.167 0.583 1.75 0.667 0.667 0.167 1.417 0.167 2.083 0.083 1.25 -0.167 2.417 -0.667 3.333 -1.583 1 -0.917 1.583 -2.083 1.833 -3.333 0.083 -0.333 0.083 -0.667 0.083 -1 0 -0.25 0.083 -0.417 0.25 -0.583 0.25 -0.25 0.5 -0.25 0.833 -0.167 0.333 0.083 0.417 0.333 0.5 0.667v0.75c-0.083 0.583 -0.167 1.167 -0.333 1.75 -0.333 1 -0.833 1.917 -1.583 2.667 -0.667 0.75 -1.5 1.333 -2.417 1.833 -0.667 0.333 -1.333 0.5 -2.083 0.667 -0.667 0.083 -1.333 0.083 -2 0.083 -1.5 -0.167 -2.75 -0.667 -3.917 -1.667 -0.167 -0.25 -0.25 -0.333 -0.333 -0.417z"
                                            style="fill:#7abb4a" />
                                    </svg> Sync</button>
                            </div>
                        </template>
                        <div slot="header">
                            <div class="slds-float_right">
                                <div class="slds-input-has-icon slds-input-has-icon_right search-holder">
                                    <div class="search-icon-block">
                                        <img class="search-icon" src={searchIcon} />
                                    </div>
                                    <input class="slds-input filter-input" type="text" placeholder="Search"
                                        onkeyup={handleChange} />
                                </div>
                            </div>
                        </div>
                        <!-- <div slot="header-button">
                            <template lwc:if={isRecord}>
                                <button  class="slds-btn slds-btn-primary slds-btn-sm slds-m-left_small slds-m-right_small waves-effect bc-green waves-light mleft-0 btn-trip slds-float_right" onclick={syncMileage}><i class="fa-solid fa-arrows-rotate"></i> Sync</button>
                            </template>
                        </div> -->
                        <div class="slds-cell-fixed checkbox-slot-div-select" slot="checkbox">
                            <template lwc:if={isSubmitVisible}>
                                <div class="corner-loop"><button
                                        class="slds-btn slds-button_outline-brand waves-effect waves-light btn-outline bc-outline--background mleft-0"
                                        onclick={submitHandler}><i class="fa-solid fa-plus fa-icon"></i>Submit</button>
                                </div>
                            </template>
                            <div class="slds-size_6-of-12 corner-select">
                                <c-dropdown-select options={selectList} title="Flag" value={value}
                                    onchange={handlePageChange}
                                    main-class="default-box-input slds-truncate"></c-dropdown-select>
                            </div>
                        </div>
                    </c-user-preview-table>
                </template>
                <div class="slds-m-top_medium">
                    <button class="slds-btn waves-effect btn-grey slds-back-btn slds-btn-sm" onclick={revertHandler}><i
                            class="fas fa-arrow-left"></i></button>
                </div>
            </div>
        </div>
    </div>
    <c-user-profile-modal header={headerModalText} month='' show-footer={isFalse} show-btn={isFalse}
        modal-class={modalClass} header-class={headerClass} subheader-class={subheaderClass}
        modal-content-style={modalContent} style-header={styleHeader} close-btn-class={styleClosebtn}>
            <div>
                <div class="slds-align_absolute-center slds-p-bottom_x-large message-center">
                    {contentMessage}</div>
                <div class="slds-align_absolute-center slds-p-right_medium slds-p-left_medium slds-p-bottom_x-large">
                    <button
                        class="slds-btn slds-btn-primary slds-btn-sm waves-effect bc-green waves-light mleft-0 btn-submit" onclick={handleFlagging}>
                        Submit</button>
                    <button
                        class="slds-btn slds-btn-primary slds-btn-sm slds-m-left_medium waves-effect bc-black waves-light mleft-0 btn-submit" onclick={cancelFlagging}>
                        Cancel</button>
                </div>
            </div>
    </c-user-profile-modal>
    <c-export-excel></c-export-excel>
</template>